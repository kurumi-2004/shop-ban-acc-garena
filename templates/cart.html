{% extends "base.html" %}

{% block content %}
<h2 class="mb-4" data-aos="fade-down"><i class="fas fa-shopping-cart"></i> Giỏ hàng của tôi</h2>

{% if cart_items %}
<div class="row">
    <div class="col-md-8">
        {% for item in cart_items %}
        <div class="cart-item" data-aos="fade-right" data-aos-delay="{{ loop.index * 50 }}">
            <div>
                <h5>{{ item.account.title }}</h5>
                <div class="account-tags">
                    <span class="tag">{{ item.account.category }}</span>
                    {% if item.account.rank %}
                    <span class="tag rank">{{ item.account.rank }}</span>
                    {% endif %}
                </div>
                <div class="account-price mt-2">{{ "{:,.0f}".format(item.account.price) }} ₫</div>
            </div>
            <div>
                <button onclick="removeFromCart({{ item.id }})" class="btn btn-danger">
                    <i class="fas fa-trash"></i> Xóa
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="col-md-4">
        <div class="card" data-aos="fade-left">
            <div class="card-body">
                <h5>Tổng đơn hàng</h5>
                <hr>
                <div class="d-flex justify-content-between mb-2">
                    <span>Số tài khoản:</span>
                    <strong>{{ cart_items|length }}</strong>
                </div>
                <div class="d-flex justify-content-between mb-3">
                    <span>Tổng tiền:</span>
                    <strong class="text-primary">{{ "{:,.0f}".format(total) }} ₫</strong>
                </div>
                <a href="{{ url_for('checkout') }}" class="btn btn-primary w-100">
                    <i class="fas fa-credit-card"></i> Thanh toán
                </a>
                <a href="{{ url_for('index') }}" class="btn btn-outline-secondary w-100 mt-2">
                    <i class="fas fa-arrow-left"></i> Tiếp tục mua
                </a>
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="text-center py-5" data-aos="zoom-in">
    <i class="fas fa-shopping-cart fa-5x text-muted mb-3"></i>
    <h4>Giỏ hàng trống</h4>
    <p class="text-muted">Hãy thêm tài khoản vào giỏ hàng để tiếp tục</p>
    <a href="{{ url_for('index') }}" class="btn btn-primary">
        <i class="fas fa-shopping-bag"></i> Mua sắm ngay
    </a>
</div>
{% endif %}
{% endblock %}
